# =========================================
# 리눅스 기본 명령어 치트시트
# =========================================

# -----------------------------------------
# 1. 위치 / 경로 / 목록
# -----------------------------------------

# pwd : 현재 작업 디렉터리(경로)를 출력
pwd

# ls : 현재 디렉터리에서 파일 및 폴더 목록 조회
ls

# ls -l : 목록을 자세히 조회 (권한, 소유자, 크기, 수정 시간 등)
ls -l

# ls -al : 숨김 파일까지 포함해서 자세히 조회
#  - a(all) : 숨김 파일(.으로 시작) 포함
#  - l(long): 상세 정보 형식
ls -al

# ls -alrt : 숨김 + 상세 + 시간 기준 정렬
#  - a(all)     : 숨김 파일 포함
#  - l(long)    : 상세 정보
#  - r(reverse) : 오래된 순으로
#  - t(time)    : 시간 기준 정렬
ls -alrt

# -----------------------------------------
# 2. 디렉터리(폴더) 작업
# -----------------------------------------

# mkdir [폴더명] : 새 폴더(디렉터리) 생성
# 예) mkdir src
mkdir sample_dir

# cd [폴더명] : 특정 디렉터리로 이동
# 예) cd src
cd sample_dir

# cd .. 또는 cd ../ : 상위(부모) 디렉터리로 이동
cd ..

# cd / : 루트 디렉터리(최상위 디렉터리)로 이동
cd /

# cd - : 직전에 있던 디렉터리로 이동 (이전 위치 토글)
cd -

# cd : 인자 없이 사용 시, 현재 사용자 홈 디렉터리로 이동
# 예) /home/사용자이름
cd

# -----------------------------------------
# 3. 파일 내용 조회 / 편집
# -----------------------------------------

# cat [파일명] : 파일 내용을 터미널에 그대로 출력
#  - 작은 파일 빠르게 확인할 때 사용
# 예) cat app.log
cat sample.txt

# more [파일명] : 페이지 단위로 출력 (space bar로 다음 페이지)
#  - 긴 파일을 위에서 아래로 읽을 때 사용
# 예) more app.log
more sample.txt

# nano [파일명] : 터미널 기반 편집기로 파일 열기 (nano 또는 vi 등 사용 가능)
#  - 내용 수정/작성용
# 예) nano app.log
nano sample.txt

# head [파일명] : 상위 10라인 조회
# 예) head app.log
head sample.txt

# head -[n] [파일명] : 상위 n라인 조회
# 예) head -20 app.log
head -5 sample.txt

# tail [파일명] : 하위 10라인 조회 (로그 확인 시 자주 사용)
# 예) tail app.log
tail sample.txt

# tail -[n] [파일명] : 하위 n라인 조회
# 예) tail -50 app.log
tail -5 sample.txt

# tail -f [파일명] : 실시간 파일 내용 조회 (로그 모니터링에 필수)
#  - 파일 끝에 새로 추가되는 내용을 계속 출력
# 예) tail -f app.log
tail -f sample.log

# -----------------------------------------
# 4. 로그 파일 개념 (설명용 주석)
# -----------------------------------------

# 로그 파일(log file)이란?
#  - 시스템, 애플리케이션, 서버 등이 동작하면서 발생한 이벤트/에러/정보를
#    "기록해 두는 텍스트 파일".
#  - 예) 웹서버 접근 로그, 에러 로그, 인증(로그인) 실패 기록 등.
#
# 개발자가 로그 파일을 조회하는 이유:
#  - 사용자가 "로그인이 안 된다" 같은 문제를 제기했을 때,
#    해당 시점에 어떤 에러가 발생했는지 로그 파일에서 추적하기 위해서.
#
# tail -f 로그파일 사용 예:
#  - 로그인이 안 되는 상황에서, 서버에 접속한 뒤
#      tail -f app.log
#    로 실시간 로그를 보면서, 요청을 다시 시도하면
#    그 시점에 찍히는 에러 로그만 바로 확인 가능.

# -----------------------------------------
# 5. 명령어 히스토리 / 화면 정리 / 중단
# -----------------------------------------

# history : 지금까지 실행한 명령어 목록 조회
#  - 번호와 함께 출력되며, !번호 로 재실행도 가능
history

# ↑ / ↓ (키보드 방향키) : 이전에 실행한 명령어 불러오기
#  - 도스키라고 부르기도 함

# clear : 터미널 화면에 출력된 내용을 지움 (스크롤은 남을 수 있음)
clear

# Ctrl + C : 현재 실행 중인 명령어나 입력 중인 명령어를 강제 중단(취소)
#  - 무한 대기 중인 명령어 끊을 때 자주 사용

# -----------------------------------------
# 6. 파일 / 디렉터리 삭제 (매우 주의)
# -----------------------------------------

# rm [파일명] : 파일 삭제
# 예) rm a.txt
rm sample.txt

# rm -r [폴더명] : 디렉터리 삭제 (하위 내용까지 재귀적으로)
# 예) rm -r src
rm -r sample_dir

# rm -rf [폴더명] : 강제 삭제 (질문 없이, 폴더/내용 전부)
#  - r : 재귀적으로 하위까지
#  - f : 강제(force), 확인 질문 없이
# !! 매우 위험: 잘못 쓰면 시스템 전체 삭제 가능

# 로그/서비스 운영 시 주의사항 예:
#  - rm -rf .  ← 절대 금지!!
#    현재 디렉터리(.)를 통째로 날리는 명령이라,
#    경로를 잘못 잡으면 시스템 파일까지 싹 지울 수 있음.
#  - 항상 `pwd`로 경로 확인 후 사용, 웬만하면 -rf 남발하지 않기.

# -----------------------------------------
# 7. 문자열 출력 / 파일에 쓰기 (echo, 리다이렉션)
# -----------------------------------------

# echo [문자열] : 터미널에 문자열 출력
# 예) echo "hello world"
echo "hello world"

# echo [문자열] > [파일명] : 파일에 덮어쓰기(write)
#  - 파일이 없으면 생성, 있으면 기존 내용 삭제 후 새 내용으로 교체
# 예) echo "first line" > memo.txt
echo "first line" > memo.txt

# echo [문자열] >> [파일명] : 파일에 내용 추가(append)
#  - 기존 내용 뒤에 이어서 붙임
# 예) echo "another line" >> memo.txt
echo "another line" >> memo.txt

# 요약:
#  - >  : 덮어쓰기
#  - >> : 추가 쓰기

# -----------------------------------------
# 8. 파일/디렉터리 복사 / 이동 / 이름 변경
# -----------------------------------------

# cp [복사대상파일명] [복사될파일명] : 파일 복사
# 예) cp a.txt b.txt
cp source.txt dest.txt

# cp -r [복사대상디렉터리] [복사될디렉터리] : 디렉터리 복사
# 예) cp -r src src_backup
cp -r src src_backup

# mv [이동대상파일] [경로/이동될파일명] : 파일/폴더 이동
# 예) mv a.txt backup/a.txt   (backup 폴더로 이동)
mv a.txt backup/a.txt

# mv [이동대상파일] [변경될파일명] : 이름 변경(rename)
# 예) mv old.txt new.txt
mv old.txt new.txt

# -----------------------------------------
# 9. 문자열 검색 (grep)
# -----------------------------------------

# grep [옵션] [문자열] [파일명] : 파일 내에서 문자열(패턴) 찾기
# 예) grep "ERROR" app.log
grep "ERROR" app.log

# grep -r [문자열] [경로] : 디렉터리 전체를 재귀적으로 검색
#  - r(recursive) : 하위 디렉터리까지 검색
# 예) grep -r "ERROR" .
grep -r "ERROR" .

# grep -n [문자열] [파일명] : 일치한 라인의 라인 번호까지 출력
#  - n(line number)
# 예) grep -n "TODO" main.py
grep -n "TODO" main.py

# grep -i [문자열] [파일명] : 대소문자 구분 없이 검색
#  - i(ignore case)
# 예) grep -i "error" app.log
grep -i "error" app.log

# -----------------------------------------
# 10. 파일/디렉터리 찾기 (find)
# -----------------------------------------

# 기본형:
# find [경로] [옵션] [행동]
#  - 경로: 어디부터 찾을지 (예: /, ., /home 등)
#  - 옵션: -name, -type 등 검색 조건
#  - 행동: -exec 같은 후속 실행 등

# 이름으로 검색:
# find [경로] -name [패턴]
# 예) 현재 디렉터리에서 이름이 app.log인 파일 찾기
find . -name "app.log"

# 타입으로 검색:
# find [경로] -type [타입]
#  - f : 일반 파일
#  - d : 디렉터리
# 예) 현재 디렉터리 이하의 디렉터리만 찾기
find . -type d

# -exec 사용 예:
# find [경로] ... -exec [명령어] {} \;
#  - exec : find 결과에 대해 지정한 명령 실행
#  - {}   : find로 찾은 대상 하나하나가 들어오는 자리
#  - \;   : exec의 종료 지점 표시(세미콜론을 이스케이프)
# 예) . 아래의 .log 파일 모두 삭제
find . -name "*.log" -exec rm {} \;

# -----------------------------------------
# 11. grep + xargs + find 조합 (응용)
# -----------------------------------------

# grep [옵션] [문자열] [파일명들] | xargs find [경로] [옵션] [행동]
#  - | (파이프): 왼쪽 명령의 출력 결과를 오른쪽 명령의 입력으로 전달
#  - xargs: 입력값을 인자(arguments)로 변환해서 뒤 명령에 넘겨주는 도구
#
# 예시 컨셉:
#  1) grep으로 특정 문자열이 포함된 파일 목록을 뽑고
#  2) 그 결과를 xargs로 find 또는 다른 명령어에 넘겨서 추가 작업 수행
#
# 실제 예 (컨셉):
#  grep -rl "ERROR" . | xargs rm
#  -> "ERROR" 문자열이 들어 있는 파일을 찾아서 전부 삭제 (위험 예시)