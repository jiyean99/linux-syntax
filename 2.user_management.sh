# =========================================
# 리눅스 사용자/권한 기본 명령어 치트시트
# =========================================

# -----------------------------------------
# 1. 사용자 정보 및 권한 상승
# -----------------------------------------

# whoami : 현재 로그인한 계정 이름 출력
#  - 내가 어떤 사용자로 명령을 실행 중인지 확인할 때 사용
whoami

# sudo : 현재 사용자 비밀번호로 "관리자(root) 권한"으로 명령 실행
#  - Super User Do
#  - sudo [명령어]
#  - root 비밀번호가 아니라, 현재 로그인한 사용자의 비밀번호를 입력
# 예) sudo apt update
# 예) sudo rm /var/log/app.log
# ※ sudo를 남용하면 시스템에 치명적일 수 있으니 주의


# -----------------------------------------
# 2. 사용자 계정 관리
# -----------------------------------------

# useradd [계정명] : 새 사용자 추가
#  - 보통 root 또는 sudo 권한으로 실행
# 예) sudo useradd devuser
useradd sampleuser

# passwd [계정명] : 사용자 비밀번호 설정/변경
#  - 마찬가지로 root 또는 sudo 권한 필요
# 예) sudo passwd devuser
passwd sampleuser

# su - [계정명] : 다른 사용자로 전환 (로그인 쉘까지 변경)
#  - 해당 계정의 비밀번호를 입력해야 함
#  - '-'를 붙이면 그 사용자로 "완전히 로그인"한 상태처럼 환경 설정까지 적용
# 예) su - devuser
su - sampleuser

# exit : 현재 쉘/세션 종료
#  - su로 다른 사용자로 들어갔다가, exit 하면 이전 사용자로 돌아감
#  - 터미널 세션 자체를 종료할 때도 사용
exit


# -----------------------------------------
# 3. 권한(permission) 개념 요약
# -----------------------------------------

# 리눅스 파일 권한은 보통 다음 형태로 표시됨:
#   rwxrwxr--
#   ^  ^  ^
#   |  |  └─ o : other (그 외 사용자)
#   |  └──── g : group (소유 그룹)
#   └─────── u : user  (소유자)
#
# 각 자리의 문자 의미:
#   r(read)    : 읽기 권한  →  숫자 4
#   w(write)   : 쓰기 권한  →  숫자 2
#   x(execute) : 실행 권한  →  숫자 1
#   -          : 해당 권한 없음
#
# 예) rwxrw-r--
#   u(소유자) : rwx = 4+2+1 = 7
#   g(그룹)   : rw- = 4+2+0 = 6
#   o(기타)   : r-- = 4+0+0 = 4
# → 숫자로 쓰면 764 권한에 해당


# -----------------------------------------
# 4. 권한 변경 (chmod)
# -----------------------------------------

# chmod [숫자] [파일명] : 숫자(8진수)로 권한 설정
#  - u(소유자), g(소유그룹), o(그 외 사용자)의 권한을 한 번에 지정
#  - r=4, w=2, x=1 → 더해서 사용
#
# 예) chmod 644 파일명
#   u : 6 (4+2) → rw-
#   g : 4      → r--
#   o : 4      → r--
#   결과: rw-r--r--
chmod 644 sample.txt

# 심볼릭 모드로 변경하기:
#   u : user(소유자)
#   g : group(소유 그룹)
#   o : other(그 외)
#   a : all(모두)
#   + : 권한 추가
#   - : 권한 제거
#   = : 권한을 정확히 지정
#
# 예) chmod u+x 파일명 : 소유자에게 실행 권한 추가
chmod u+x sample.txt

# 예) chmod g-x 파일명 : 그룹에서 실행 권한 제거
chmod g-x sample.txt

# 예) chmod o=r 파일명 : 기타 사용자에게 읽기만 허용 (r-- 로 설정)
chmod o=r sample.txt


# -----------------------------------------
# 5. 소유자 / 그룹 변경 (chown)
# -----------------------------------------

# chown [소유자]:[소유그룹] [파일/디렉터리] : 소유자/소유그룹 변경
#  - 보통 root 또는 sudo 권한 필요
#  - 그룹만 바꾸려면 :group 형태, 사용자만 바꾸려면 user: 형태도 가능
#
# 예) chown devuser:devgroup file.txt
chown owneruser:ownergroup sample.txt

# 디렉터리와 그 안의 모든 파일/폴더까지 재귀적으로 바꾸고 싶으면 -R 옵션:
# 예) chown -R devuser:devgroup /var/www/project
chown -R owneruser:ownergroup sample_dir


# -----------------------------------------
# 6. 사용 팁
# -----------------------------------------

# - whoami로 현재 계정 확인 후, sudo가 필요한 작업인지 판단.
# - useradd/passwd/su는 계정 관련, chmod/chown은 파일/디렉터리 권한/소유권 관련.
# - chmod 숫자 계산:
#     r(4) + w(2) + x(1)을 더해서 각 자리(u/g/o)를 정함.
#     예) 755 → u:7(rwx), g:5(r-x), o:5(r-x)
# - chown은 "이 파일/폴더의 주인과 그룹을 바꾸는 명령"이라는 느낌으로 기억.
